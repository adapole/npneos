<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<h1>Client</h1>
		<button onclick="sendMessage()">Send Message</button>
		<button onclick="sign()">Sign</button>
		<button onclick="atomic()">ATOMIC</button>
		<button onclick="connectWallet()">Connect Wallet</button>
		<button onclick="sendMessageI()">Borrow</button>
		<button onclick="diconnectWallet()">Disconnect</button>
	</body>
	<script>
		const socket = new WebSocket('ws://localhost:3000');

		// connection opened
		socket.addEventListener('open', function (event) {
			console.log('Connected to WS server');
		});

		// Listen for messages
		socket.addEventListener('message', function (event) {
			console.log('Message from server: ' + event.data);
		});
		const sendMessageI = (message) => {
			console.log('Sending message: i to borrow');
			socket.send('borrow,97931298,1,1');
			//socket.send(message);
		};
		let Isinterval = false;
		const setIntervalI = () => {
			if (Isinterval) {
				Isinterval = false;
				console.log(Isinterval);
			} else {
				Isinterval = true;
				console.log(Isinterval);
			}
		};
		function myIntervalFunction() {
			if (Isinterval) {
				sendMessageI();
			}
		}
		setInterval(myIntervalFunction, 10000);

		const sendMessage = (message) => {
			socket.send('Hello from client');
			//socket.send(message);
		};
		const connectWallet = (message) => {
			socket.send('wc');
			//setIntervalI();
			//socket.send(message);
		};
		const sign = (message) => {
			socket.send('sign');
			//socket.send(message);
		};
		const atomic = (message) => {
			socket.send(
				'atomic,address,10458941,1,KLNYAXOWHKBHUKVDDWFOSXNHYDS45M3KJW4HYJ6GOQB4LGAH4LJF57QVZI,0,1'
			);
		};
		const diconnectWallet = (message) => {
			console.log('Disconnected!!');
			socket.close();
		};
	</script>
</html>
